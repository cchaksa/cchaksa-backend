spring:
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration
  profiles:
    active: local
  jackson:
    time-zone: Asia/Seoul
    date-format: yyyy-MM-dd HH:mm:ss
  config:
    import: optional:file:.env[.properties]
  mvc:
    throw-exception-if-no-handler-found: true
  web:
    resources:
      add-mappings: false

server:
  port: 8080
  application:
    name: "chukchuk-haksa"

security:
  jwt:
    secret: ${JWT_SECRET}
    access-expiration: ${JWT_ACCESS_EXPIRATION}
    refresh-expiration: ${JWT_REFRESH_EXPIRATION}
  appKey: ${APP_KEY}

crawler:
  base-url: ${CRAWLER_BASE_URL}

springdoc:
  api-docs:
    enabled: true

sentry:
  traces-sample-rate: 1.0
  logging:
    minimum-event-level: error
    minimum-breadcrumb-level: info

# ─────────────────────────────────────────
# 모니터링 및 관리 (Actuator & Metrics)
# ─────────────────────────────────────────
management:
  endpoints:
    web:
      exposure:
        # 블로그 분석용으로 prometheus와 metrics는 필수라네
        include: "prometheus,health,info,metrics"
  endpoint:
    health:
      show-details: always
  metrics:
    tags:
      # 그라파나에서 서버 여러 대를 띄워도 구분할 수 있게 해줌
      application: "chukchuk-haksa"
    distribution:
      percentiles-histogram:
        http.server.requests: true
      minimum-expected-value:
        http.server.requests: 1ms
      maximum-expected-value:
        http.server.requests: 10s
    export:
      prometheus:
        enabled: true
  # 기존 tracing 설정 유지
  tracing:
    enabled: true
  health:
    redis:
      enabled: false

logging:
  exclude:
    patterns:
      - /favicon.ico
      - ^/static/.*
      - ^/internal/.*
      - /docs

# ─────────────────────────────────────────
# Cache / Infra 전략 (기본값)
# ─────────────────────────────────────────
cache:
  type: local   # local | redis

portal:
  credential:
    store: local   # local | redis

infra:
  redis:
    enabled: false